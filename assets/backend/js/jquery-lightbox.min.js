(function(a){a.fn.lightbox=function(f){var s={init:function(u){o(this.selector);var v=a(this.selector);return v.each(function(){k(v,u)})},destroy:function(u){return this.each(function(){j(this,u)})},remove:function(u){return this.each(function(){i(this,u)})},hideContent:function(u){return this.each(function(){q(this,u)})},showContent:function(u){return this.each(function(){n(this,u)})}};var m={object:this.selector,background:"background-color:rgba(0,0,0,.8);",zIndex:"10000",type:"html",time:300,width:300,height:null,show_loader:"",closeWhenClickOutside:false,url:"",type_ajax:"",dataType:"",data:"",closeWithDelay:0,added:function(){},destroyed:function(){},ajax_error:function(){},ajax_sucess:function(){},ajax_complete:function(){},htmlAdded:function(){}};var l;var h;if(s[f]){return s[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return s.init.apply(this,arguments)}else{a.error("Method "+f+" does not exist on jQuery.boilerplate")}}function k(v,u){h=a(v);l=a.extend(m,u);d(v)}function d(w){jQuery(document.body).css("overflow","hidden");h.append(t());a(l.object).show();if(l.type=="ajax"){b()}else{var v=a(l.contentHtml);c({html:v})}l.added.call();a(l.object).data(l);a(l.object).animate({opacity:1},l.time);if(l.closeWhenClickOutside){a(".lightbox-background",a(l.object)).mousedown(function(){g()})}if(l.closeWithDelay>0){var u=setTimeout(function(){g();clearTimeout(u)},(l.closeWithDelay*1000))}a(".lightbox-button-close",a(l.object)).click(function(){g();return false})}function g(){a(l.object).fadeOut(l.time,function(){j()})}function i(v){var u=a(v).data();l=u;h=a(v);g()}function j(){a(l.object).data(null);a(l.object).remove();l.destroyed.call();jQuery(document.body).css("overflow","auto")}function b(){a.ajax({url:l.url,type:l.type_ajax,dataType:l.dataType,data:l.data,error:function(u){l.ajax_error.call(this,{data:u});e("remove")},success:function(x){a(".lightbox-content",a(l.object)).css({opacity:0});var v=(l.dataType=="json")?x.html:x;v=a(v);var u=a("<div></div>");u.addClass("content-loaded");a(".lightbox-content .lightbox-load-content",a(l.object)).append(u);u.append(v);var w=(l.height)?l.height:u.outerHeight(true);v.css({width:l.width,height:w});a(".lightbox-content .lightbox-load-content",a(l.object)).css({width:(l.width)+"px",height:(w)+"px",margin:"0 auto"});r(u);l.ajax_sucess.call(this,{data:x});a(".lightbox-content",a(l.object)).animate({opacity:1},200)},complete:function(u){e("remove");l.ajax_complete.call(this,{data:u})}})}function e(u){if(u=="add"){h.append('<div class="lightbox-loader" style="'+l.show_loader+'"></div>')}else{if(a(".lightbox-loader",a(l.object)).size()>0){a(".lightbox-loader",a(l.object)).remove()}}}function c(x){var v=a(x.html);var u=a("<div></div>");u.addClass("content-loaded");a(".lightbox-content .lightbox-load-content",a(l.object)).append(u);u.append(v);r(u);var w=(l.height)?l.height:u.outerHeight(true);v.css({width:l.width});a(".lightbox-content .lightbox-load-content",a(l.object)).css({width:(l.width)+"px",margin:"0 auto"});l.htmlAdded.call()}function q(w,u){var v=u.item;v.parents(".content-loaded").fadeOut(200,function(){p(a(w),u)})}function p(x,w){var v=a.extend(x.data(),w);l=v;h=x;if(l.type=="ajax"){e("add");a.ajax({url:v.url,type:v.type_ajax,dataType:v.dataType,data:v.data,error:function(y){v.ajax_error.call(this,{data:y});e("remove")},success:function(B){var z=(l.dataType=="json")?B.html:B;z=a(z);var y=a("<div></div>");y.addClass("content-loaded");y.append(z);z.css({opacity:0});a(".lightbox-load-content",x).append(y);var A=(l.height)?l.height:y.outerHeight(true);z.css({width:l.width,height:A});a(".lightbox-load-content",x).css({width:(l.width)+"px",height:(A)+"px"});r(y);l.ajax_sucess.call(this,{data:B});z.animate({opacity:1},200)},complete:function(y){e("remove");l.ajax_complete.call(this,{data:y})}})}else{var u=w.html;c({html:u})}}function n(v,u){}function o(w){var v=w.charAt(0);var y=w.substring(1,(w.length));var x=(v=="#")?'id="'+y+'"':'class="'+y+'"';var u;u="<div "+x+"></div>";jQuery(document.body).append(u)}function r(u){if(a(".lightbox-button-close",u).size()>0){a(".lightbox-button-close",u).unbind("click").click(function(){var v=(a(".lightbox-load-content",h).children().length)-1;if(v==0){g()}else{u.fadeOut(200,function(){u.remove();v=(a(".lightbox-load-content",h).children().length)-1;var w=a(".content-loaded",h).eq(v);a(".lightbox-load-content",h).css({width:(w.width())+"px",height:(w.height())+"px"});w.fadeIn(200)})}return false})}}function t(){var u="";h.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",opacity:0,display:"none",overflow:"scroll",zIndex:l.zIndex});u+='<table style=" width:100%; height:100%; position:relative;" class="lightbox-modal">';if(l.show_loader!=""){e("add")}u+="<tr>";u+='<td class="lightbox-content" style=" padding:30px; vertical-align: middle;">';u+='<div class="lightbox-background" style="position:absolute; top:0; left:0; width:100%; height:100%;'+l.background+';"></div>';u+='<div style="position:relative; z-index:10;" class="lightbox-load-content">';u+="</div>";u+="</td>";u+="</tr>";u+="</table>";return u}}})(jQuery);